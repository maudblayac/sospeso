{% extends 'admin/layout.html.twig' %}

{% block title %}Liste des restaurateurs{% endblock %}

{% block content %}
<div class="dashboardWelcome">
    <h1>Gestion des restaurateurs</h1>
    <a href="{{ path('admin_register_new') }}" class="btn btnPrimary">Créer un nouveau restaurateur</a>
</div>

<div class="responsiveTableContainer">
    <table class="responsiveTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Email</th>
                <th>Statut</th>
                <th>Demande</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for restaurateur in restaurateurs %}
                <tr>
                    <td>{{ restaurateur.id }}</td>
                    <td>{{ restaurateur.email }}</td>
                    <td>
                        <span class="badge 
                            {% if restaurateur.status.value == 'VALIDE' %}badgeSuccess
                            {% elseif restaurateur.status.value == 'EN_ATTENTE' %}badgeWarning
                            {% else %}badgeDanger{% endif %}
                        ">
                            {{ restaurateur.status.value }}
                        </span>
                    </td>
                    <td>
                        {% if restaurateur.restaurant and not restaurateur.restaurant.isApproved %}
                            <span class="badge badgeWarning">Demande en attente</span>
                        {% else %}
                            <span class="badge badgeNeutral">Aucune demande</span>
                        {% endif %}
                    </td>
                    <td class="actionButtons">
                        <a href="{{ path('admin_restaurateur_show', { id: restaurateur.id }) }}" class="btn btnInfo">Voir</a>
                        <form method="POST" action="{{ path('admin_restaurateur_change_status', { id: restaurateur.id }) }}" class="inlineForm">
                            <select name="status" class="selectField">
                                <option value="EN_ATTENTE">En attente</option>
                                <option value="VALIDE">Validé</option>
                                <option value="ARCHIVE">Archivé</option>
                            </select>
                            <button type="submit" class="btn btnPrimary">Changer</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
